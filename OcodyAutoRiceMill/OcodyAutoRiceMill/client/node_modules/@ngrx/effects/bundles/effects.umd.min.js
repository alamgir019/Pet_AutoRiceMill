/**
 * @license NgRx 6.1.0
 * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ngrx/store"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngrx/effects",["exports","@ngrx/store","rxjs","rxjs/operators","@angular/core"],e):e((t.ngrx=t.ngrx||{},t.ngrx.effects={}),t["@ngrx/store"],t.rxjs,t.rxjs.operators,t.ng.core)}(this,function(t,e,r,n,o){"use strict";var c="__@ngrx/effects__";function f(t){return t.constructor.hasOwnProperty(c)?t.constructor[c]:[]}function i(t){return Object.getPrototypeOf(t)}function u(t){return e.compose(f,i)(t)}var a="ngrxOnRunEffects",s=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,c=r.call(t),f=[];try{for(;(void 0===e||e-- >0)&&!(n=c.next()).done;)f.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=c.return)&&r.call(c)}finally{if(o)throw o.error}}return f},p=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t};function y(t){var e=i(t).constructor.name,o=u(t).map(function(r){var o=r.propertyName,c=r.dispatch,f="function"==typeof t[o]?t[o]():t[o];return!1===c?f.pipe(n.ignoreElements()):f.pipe(n.materialize()).pipe(n.map(function(r){return{effect:t[o],notification:r,propertyName:o,sourceName:e,sourceInstance:t}}))});return r.merge.apply(void 0,p(o))}function l(t){var e=y(t);return function r(t){var e=i(t);return a in e&&"function"==typeof e[a]}(t)?t.ngrxOnRunEffects(e):e}var d,h=(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,c=r.call(t),f=[];try{for(;(void 0===e||e-- >0)&&!(n=c.next()).done;)f.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=c.return)&&r.call(c)}finally{if(o)throw o.error}}return f},g=function(t){function n(e){var r=t.call(this)||this;return e&&(r.source=e),r}return h(n,t),n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.ofType=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _.apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}(t))(this)},n.decorators=[{type:o.Injectable}],n.ctorParameters=function(){return[{type:r.Observable,decorators:[{type:o.Inject,args:[e.ScannedActionsSubject]}]}]},n}(r.Observable);function _(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.filter(function(e){return t.some(function(t){return t===e.type})})}var m=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),x=function(t){function e(e){var r=t.call(this)||this;return r.errorHandler=e,r}return m(e,t),e.prototype.addEffects=function(t){this.next(t)},e.prototype.toActions=function(){var t=this;return this.pipe(n.groupBy(i),n.mergeMap(function(e){return e.pipe(n.exhaustMap(l),n.map(function(e){return function r(t,e){!function r(t,e){"E"===t.notification.kind&&e.handleError(t.notification.error)}(t,e),function n(t,e){if("N"===t.notification.kind){var r=t.notification.value;!function n(t){return t&&t.type&&"string"==typeof t.type}(r)&&e.handleError(new Error("Effect "+function o(t){var e=t.propertyName;return'"'+t.sourceName+"."+e+("function"==typeof t.sourceInstance[e]?"()":"")+'"'}(t)+" dispatched an invalid action: "+function c(t){try{return JSON.stringify(t)}catch(e){return t}}(r)))}}(t,e)}(e,t.errorHandler),e.notification}),n.filter(function(t){return"N"===t.kind}),n.dematerialize())}))},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:o.ErrorHandler}]},e}(r.Subject),b=(new o.InjectionToken("ngrx/effects: Immediate Effects"),new o.InjectionToken("ngrx/effects: Root Effects")),E=new o.InjectionToken("ngrx/effects: Feature Effects"),O=function(){function t(t,e){this.effectSources=t,this.store=e,this.effectsSubscription=null}return t.prototype.start=function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))},t.prototype.ngOnDestroy=function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)},t.decorators=[{type:o.Injectable}],t.ctorParameters=function(){return[{type:x},{type:e.Store}]},t}(),S="@ngrx/effects/init",j=function(){function t(t,e,r,n,o,c){this.sources=t,e.start(),n.forEach(function(e){return t.addEffects(e)}),r.dispatch({type:S})}return t.prototype.addEffects=function(t){this.sources.addEffects(t)},t.decorators=[{type:o.NgModule,args:[{}]}],t.ctorParameters=function(){return[{type:x},{type:O},{type:e.Store},{type:Array,decorators:[{type:o.Inject,args:[b]}]},{type:e.StoreRootModule,decorators:[{type:o.Optional}]},{type:e.StoreFeatureModule,decorators:[{type:o.Optional}]}]},t}(),w=function(){function t(t,e,r,n){this.root=t,e.forEach(function(e){return e.forEach(function(e){return t.addEffects(e)})})}return t.decorators=[{type:o.NgModule,args:[{}]}],t.ctorParameters=function(){return[{type:j},{type:Array,decorators:[{type:o.Inject,args:[E]}]},{type:e.StoreRootModule,decorators:[{type:o.Optional}]},{type:e.StoreFeatureModule,decorators:[{type:o.Optional}]}]},t}(),I=function(){function t(){}return t.forFeature=function(t){return{ngModule:w,providers:[t,{provide:E,multi:!0,deps:t,useFactory:M}]}},t.forRoot=function(t){return{ngModule:j,providers:[O,x,g,t,{provide:b,deps:t,useFactory:M}]}},t.decorators=[{type:o.NgModule,args:[{}]}],t}();function M(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}t.ɵngrx_modules_effects_effects_c=w,t.ɵngrx_modules_effects_effects_a=M,t.ɵngrx_modules_effects_effects_b=j,t.ɵngrx_modules_effects_effects_f=O,t.ɵngrx_modules_effects_effects_e=E,t.ɵngrx_modules_effects_effects_d=b,t.Effect=function N(t){var e=(void 0===t?{}:t).dispatch,r=void 0===e||e;return function(t,e){!function n(t,e){var r=t.constructor,n=r.hasOwnProperty(c)?r[c]:Object.defineProperty(r,c,{value:[]})[c];Array.prototype.push.apply(n,e)}(t,[{propertyName:e,dispatch:r}])}},t.getEffectsMetadata=function P(t){var e,r,n={};try{for(var o=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}(u(t)),c=o.next();!c.done;c=o.next()){var f=c.value;n[f.propertyName]={dispatch:f.dispatch}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.mergeEffects=y,t.Actions=g,t.ofType=_,t.EffectsModule=I,t.EffectSources=x,t.ROOT_EFFECTS_INIT=S,Object.defineProperty(t,"__esModule",{value:!0})});