{"version":3,"sources":["modules/effects/effects.umd.js"],"names":["global","factory","exports","module","require","define","amd","ngrx","effects","rxjs","operators","ng","core","this","store","METADATA_KEY","getEffectMetadataEntries","sourceProto","constructor","hasOwnProperty","getSourceForInstance","instance","Object","getPrototypeOf","getSourceMetadata","compose","onRunEffectsKey","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","mergeEffects","sourceInstance","sourceName","name","observables","map","_a","propertyName","dispatch","observable","pipe","ignoreElements","materialize","notification","effect","merge","apply","resolveEffectSource","mergedEffects$","isOnRunEffects","source","ngrxOnRunEffects","extendStatics","__extends","setPrototypeOf","__proto__","Array","d","b","p","__","prototype","create","__read$1","Actions","_super","_this","lift","operator","ofType","allowedTypes","_i","__spread$1","decorators","type","Injectable","ctorParameters","Observable","Inject","args","ScannedActionsSubject","filter","action","some","__extends$1","EffectSources","errorHandler","addEffects","effectSourceInstance","toActions","groupBy","mergeMap","source$","exhaustMap","output","verifyOutput","reporter","reportErrorThrown","kind","handleError","reportInvalidActions","isAction","Error","getEffectName","stringify","JSON","dematerialize","ErrorHandler","Subject","ROOT_EFFECTS","InjectionToken","FEATURE_EFFECTS","EffectsRunner","effectSources","store$$1","effectsSubscription","start","subscribe","ngOnDestroy","unsubscribe","Store","ROOT_EFFECTS_INIT","EffectsRootModule","sources","runner","rootEffects","storeRootModule","storeFeatureModule","forEach","NgModule","StoreRootModule","Optional","StoreFeatureModule","EffectsFeatureModule","root","effectSourceGroups","group","EffectsModule","forFeature","featureEffects","ngModule","providers","provide","multi","deps","useFactory","createSourceInstances","forRoot","instances","ɵngrx_modules_effects_effects_c","ɵngrx_modules_effects_effects_a","ɵngrx_modules_effects_effects_b","ɵngrx_modules_effects_effects_f","ɵngrx_modules_effects_effects_e","ɵngrx_modules_effects_effects_d","Effect","_b","target","setEffectMetadataEntries","entries","meta","defineProperty","getEffectsMetadata","e_1","_d","metadata","__values","_c","e_1_1","return"],"mappings":"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","sourcesContent":["/**\n * @license NgRx 6.1.0\n * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin\n * License: MIT\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@ngrx/store'), require('rxjs'), require('rxjs/operators'), require('@angular/core')) :\n    typeof define === 'function' && define.amd ? define('@ngrx/effects', ['exports', '@ngrx/store', 'rxjs', 'rxjs/operators', '@angular/core'], factory) :\n    (factory((global.ngrx = global.ngrx || {}, global.ngrx.effects = {}),global['@ngrx/store'],global.rxjs,global.rxjs.operators,global.ng.core));\n}(this, (function (exports,store,rxjs,operators,core) { 'use strict';\n\n    var __values = (undefined && undefined.__values) || function (o) {\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n        if (m) return m.call(o);\n        return {\n            next: function () {\n                if (o && i >= o.length) o = void 0;\n                return { value: o && o[i++], done: !o };\n            }\n        };\n    };\n    var METADATA_KEY = '__@ngrx/effects__';\n    function getEffectMetadataEntries(sourceProto) {\n        return sourceProto.constructor.hasOwnProperty(METADATA_KEY)\n            ? sourceProto.constructor[METADATA_KEY]\n            : [];\n    }\n    function setEffectMetadataEntries(sourceProto, entries) {\n        var constructor = sourceProto.constructor;\n        var meta = constructor.hasOwnProperty(METADATA_KEY)\n            ? constructor[METADATA_KEY]\n            : Object.defineProperty(constructor, METADATA_KEY, { value: [] })[METADATA_KEY];\n        Array.prototype.push.apply(meta, entries);\n    }\n    function Effect(_a) {\n        var _b = (_a === void 0 ? {} : _a).dispatch, dispatch = _b === void 0 ? true : _b;\n        // Once TS is >= 2.8 replace with <Key extends Extract<keyof T, string>>\n        // for propertyName.\n        return function (target, propertyName) {\n            var metadata = { propertyName: propertyName, dispatch: dispatch };\n            setEffectMetadataEntries(target, [metadata]);\n        };\n    }\n    function getSourceForInstance(instance) {\n        return Object.getPrototypeOf(instance);\n    }\n    function getSourceMetadata(instance) {\n        return store.compose(getEffectMetadataEntries, getSourceForInstance)(instance);\n    }\n    function getEffectsMetadata(instance) {\n        var metadata = {};\n        try {\n            for (var _a = __values(getSourceMetadata(instance)), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var _c = _b.value, propertyName = _c.propertyName, dispatch = _c.dispatch;\n                metadata[propertyName] = { dispatch: dispatch };\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return metadata;\n        var e_1, _d;\n    }\n\n    var onRunEffectsKey = 'ngrxOnRunEffects';\n    function isOnRunEffects(sourceInstance) {\n        var source = getSourceForInstance(sourceInstance);\n        return (onRunEffectsKey in source && typeof source[onRunEffectsKey] === 'function');\n    }\n\n    var __read = (undefined && undefined.__read) || function (o, n) {\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n        if (!m) return o;\n        var i = m.call(o), r, ar = [], e;\n        try {\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n        }\n        catch (error) { e = { error: error }; }\n        finally {\n            try {\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\n            }\n            finally { if (e) throw e.error; }\n        }\n        return ar;\n    };\n    var __spread = (undefined && undefined.__spread) || function () {\n        for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n        return ar;\n    };\n    function mergeEffects(sourceInstance) {\n        var sourceName = getSourceForInstance(sourceInstance).constructor.name;\n        var observables = getSourceMetadata(sourceInstance).map(function (_a) {\n            var propertyName = _a.propertyName, dispatch = _a.dispatch;\n            var observable = typeof sourceInstance[propertyName] === 'function'\n                ? sourceInstance[propertyName]()\n                : sourceInstance[propertyName];\n            if (dispatch === false) {\n                return observable.pipe(operators.ignoreElements());\n            }\n            var materialized$ = observable.pipe(operators.materialize());\n            return materialized$.pipe(operators.map(function (notification) {\n                return ({\n                    effect: sourceInstance[propertyName],\n                    notification: notification,\n                    propertyName: propertyName,\n                    sourceName: sourceName,\n                    sourceInstance: sourceInstance,\n                });\n            }));\n        });\n        return rxjs.merge.apply(void 0, __spread(observables));\n    }\n    function resolveEffectSource(sourceInstance) {\n        var mergedEffects$ = mergeEffects(sourceInstance);\n        if (isOnRunEffects(sourceInstance)) {\n            return sourceInstance.ngrxOnRunEffects(mergedEffects$);\n        }\n        return mergedEffects$;\n    }\n\n    var __extends = (undefined && undefined.__extends) || (function () {\n        var extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return function (d, b) {\n            extendStatics(d, b);\n            function __() { this.constructor = d; }\n            d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n    })();\n    var __read$1 = (undefined && undefined.__read) || function (o, n) {\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n        if (!m) return o;\n        var i = m.call(o), r, ar = [], e;\n        try {\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n        }\n        catch (error) { e = { error: error }; }\n        finally {\n            try {\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\n            }\n            finally { if (e) throw e.error; }\n        }\n        return ar;\n    };\n    var __spread$1 = (undefined && undefined.__spread) || function () {\n        for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$1(arguments[i]));\n        return ar;\n    };\n    var Actions = /** @class */ (function (_super) {\n        __extends(Actions, _super);\n        function Actions(source) {\n            var _this = _super.call(this) || this;\n            if (source) {\n                _this.source = source;\n            }\n            return _this;\n        }\n        Actions.prototype.lift = function (operator) {\n            var observable = new Actions();\n            observable.source = this;\n            observable.operator = operator;\n            return observable;\n        };\n        /**\n         * @deprecated from 6.1.0. Use the pipeable `ofType` operator instead.\n         */\n        /**\n           * @deprecated from 6.1.0. Use the pipeable `ofType` operator instead.\n           */\n        Actions.prototype.ofType = /**\n           * @deprecated from 6.1.0. Use the pipeable `ofType` operator instead.\n           */\n        function () {\n            var allowedTypes = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                allowedTypes[_i] = arguments[_i];\n            }\n            return ofType.apply(void 0, __spread$1(allowedTypes))(this);\n        };\n        Actions.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        Actions.ctorParameters = function () { return [\n            { type: rxjs.Observable, decorators: [{ type: core.Inject, args: [store.ScannedActionsSubject,] },] },\n        ]; };\n        return Actions;\n    }(rxjs.Observable));\n    function ofType() {\n        var allowedTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            allowedTypes[_i] = arguments[_i];\n        }\n        return operators.filter(function (action) {\n            return allowedTypes.some(function (type) { return type === action.type; });\n        });\n    }\n\n    function verifyOutput(output, reporter) {\n        reportErrorThrown(output, reporter);\n        reportInvalidActions(output, reporter);\n    }\n    function reportErrorThrown(output, reporter) {\n        if (output.notification.kind === 'E') {\n            reporter.handleError(output.notification.error);\n        }\n    }\n    function reportInvalidActions(output, reporter) {\n        if (output.notification.kind === 'N') {\n            var action = output.notification.value;\n            var isInvalidAction = !isAction(action);\n            if (isInvalidAction) {\n                reporter.handleError(new Error(\"Effect \" + getEffectName(output) + \" dispatched an invalid action: \" + stringify(action)));\n            }\n        }\n    }\n    function isAction(action) {\n        return action && action.type && typeof action.type === 'string';\n    }\n    function getEffectName(_a) {\n        var propertyName = _a.propertyName, sourceInstance = _a.sourceInstance, sourceName = _a.sourceName;\n        var isMethod = typeof sourceInstance[propertyName] === 'function';\n        return \"\\\"\" + sourceName + \".\" + propertyName + (isMethod ? '()' : '') + \"\\\"\";\n    }\n    function stringify(action) {\n        try {\n            return JSON.stringify(action);\n        }\n        catch (_a) {\n            return action;\n        }\n    }\n\n    var __extends$1 = (undefined && undefined.__extends) || (function () {\n        var extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return function (d, b) {\n            extendStatics(d, b);\n            function __() { this.constructor = d; }\n            d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n    })();\n    var EffectSources = /** @class */ (function (_super) {\n        __extends$1(EffectSources, _super);\n        function EffectSources(errorHandler) {\n            var _this = _super.call(this) || this;\n            _this.errorHandler = errorHandler;\n            return _this;\n        }\n        EffectSources.prototype.addEffects = function (effectSourceInstance) {\n            this.next(effectSourceInstance);\n        };\n        /**\n         * @internal\n         */\n        /**\n           * @internal\n           */\n        EffectSources.prototype.toActions = /**\n           * @internal\n           */\n        function () {\n            var _this = this;\n            return this.pipe(operators.groupBy(getSourceForInstance), operators.mergeMap(function (source$) {\n                return source$.pipe(operators.exhaustMap(resolveEffectSource), operators.map(function (output) {\n                    verifyOutput(output, _this.errorHandler);\n                    return output.notification;\n                }), operators.filter(function (notification) {\n                    return notification.kind === 'N';\n                }), operators.dematerialize());\n            }));\n        };\n        EffectSources.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        EffectSources.ctorParameters = function () { return [\n            { type: core.ErrorHandler, },\n        ]; };\n        return EffectSources;\n    }(rxjs.Subject));\n\n    var IMMEDIATE_EFFECTS = new core.InjectionToken('ngrx/effects: Immediate Effects');\n    var ROOT_EFFECTS = new core.InjectionToken('ngrx/effects: Root Effects');\n    var FEATURE_EFFECTS = new core.InjectionToken('ngrx/effects: Feature Effects');\n\n    var EffectsRunner = /** @class */ (function () {\n        function EffectsRunner(effectSources, store$$1) {\n            this.effectSources = effectSources;\n            this.store = store$$1;\n            this.effectsSubscription = null;\n        }\n        EffectsRunner.prototype.start = function () {\n            if (!this.effectsSubscription) {\n                this.effectsSubscription = this.effectSources\n                    .toActions()\n                    .subscribe(this.store);\n            }\n        };\n        EffectsRunner.prototype.ngOnDestroy = function () {\n            if (this.effectsSubscription) {\n                this.effectsSubscription.unsubscribe();\n                this.effectsSubscription = null;\n            }\n        };\n        EffectsRunner.decorators = [\n            { type: core.Injectable }\n        ];\n        /** @nocollapse */\n        EffectsRunner.ctorParameters = function () { return [\n            { type: EffectSources, },\n            { type: store.Store, },\n        ]; };\n        return EffectsRunner;\n    }());\n\n    var ROOT_EFFECTS_INIT = '@ngrx/effects/init';\n    var EffectsRootModule = /** @class */ (function () {\n        function EffectsRootModule(sources, runner, store$$1, rootEffects, storeRootModule, storeFeatureModule) {\n            this.sources = sources;\n            runner.start();\n            rootEffects.forEach(function (effectSourceInstance) {\n                return sources.addEffects(effectSourceInstance);\n            });\n            store$$1.dispatch({ type: ROOT_EFFECTS_INIT });\n        }\n        EffectsRootModule.prototype.addEffects = function (effectSourceInstance) {\n            this.sources.addEffects(effectSourceInstance);\n        };\n        EffectsRootModule.decorators = [\n            { type: core.NgModule, args: [{},] }\n        ];\n        /** @nocollapse */\n        EffectsRootModule.ctorParameters = function () { return [\n            { type: EffectSources, },\n            { type: EffectsRunner, },\n            { type: store.Store, },\n            { type: Array, decorators: [{ type: core.Inject, args: [ROOT_EFFECTS,] },] },\n            { type: store.StoreRootModule, decorators: [{ type: core.Optional },] },\n            { type: store.StoreFeatureModule, decorators: [{ type: core.Optional },] },\n        ]; };\n        return EffectsRootModule;\n    }());\n\n    var EffectsFeatureModule = /** @class */ (function () {\n        function EffectsFeatureModule(root, effectSourceGroups, storeRootModule, storeFeatureModule) {\n            this.root = root;\n            effectSourceGroups.forEach(function (group) {\n                return group.forEach(function (effectSourceInstance) {\n                    return root.addEffects(effectSourceInstance);\n                });\n            });\n        }\n        EffectsFeatureModule.decorators = [\n            { type: core.NgModule, args: [{},] }\n        ];\n        /** @nocollapse */\n        EffectsFeatureModule.ctorParameters = function () { return [\n            { type: EffectsRootModule, },\n            { type: Array, decorators: [{ type: core.Inject, args: [FEATURE_EFFECTS,] },] },\n            { type: store.StoreRootModule, decorators: [{ type: core.Optional },] },\n            { type: store.StoreFeatureModule, decorators: [{ type: core.Optional },] },\n        ]; };\n        return EffectsFeatureModule;\n    }());\n\n    var EffectsModule = /** @class */ (function () {\n        function EffectsModule() {\n        }\n        EffectsModule.forFeature = function (featureEffects) {\n            return {\n                ngModule: EffectsFeatureModule,\n                providers: [\n                    featureEffects,\n                    {\n                        provide: FEATURE_EFFECTS,\n                        multi: true,\n                        deps: featureEffects,\n                        useFactory: createSourceInstances,\n                    },\n                ],\n            };\n        };\n        EffectsModule.forRoot = function (rootEffects) {\n            return {\n                ngModule: EffectsRootModule,\n                providers: [\n                    EffectsRunner,\n                    EffectSources,\n                    Actions,\n                    rootEffects,\n                    {\n                        provide: ROOT_EFFECTS,\n                        deps: rootEffects,\n                        useFactory: createSourceInstances,\n                    },\n                ],\n            };\n        };\n        EffectsModule.decorators = [\n            { type: core.NgModule, args: [{},] }\n        ];\n        return EffectsModule;\n    }());\n    function createSourceInstances() {\n        var instances = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            instances[_i] = arguments[_i];\n        }\n        return instances;\n    }\n\n    /**\n     * DO NOT EDIT\n     *\n     * This file is automatically generated at build\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.ɵngrx_modules_effects_effects_c = EffectsFeatureModule;\n    exports.ɵngrx_modules_effects_effects_a = createSourceInstances;\n    exports.ɵngrx_modules_effects_effects_b = EffectsRootModule;\n    exports.ɵngrx_modules_effects_effects_f = EffectsRunner;\n    exports.ɵngrx_modules_effects_effects_e = FEATURE_EFFECTS;\n    exports.ɵngrx_modules_effects_effects_d = ROOT_EFFECTS;\n    exports.Effect = Effect;\n    exports.getEffectsMetadata = getEffectsMetadata;\n    exports.mergeEffects = mergeEffects;\n    exports.Actions = Actions;\n    exports.ofType = ofType;\n    exports.EffectsModule = EffectsModule;\n    exports.EffectSources = EffectSources;\n    exports.ROOT_EFFECTS_INIT = ROOT_EFFECTS_INIT;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=effects.umd.js.map\n"]}